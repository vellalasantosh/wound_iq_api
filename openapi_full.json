{
  "openapi_yaml": "openapi: 3.0.3\ninfo:\n  title: Wound IQ API\n  version: \"1.0.0\"\n  description: |\n    Production-ready API for Wound IQ. Mode A: POST /v1/assessments calls the stored function add_full_assessment(...) and requires the full assessment payload (all wound tables).\n  contact:\n    name: Wound IQ Dev\nservers:\n  - url: http://localhost:8080/v1\n    description: Local development server\nexternalDocs:\n  description: Database scripts (local paths)\n  url: file:///mnt/data/wound_iq_functions_corrected.sql\ntags:\n  - name: Patients\n    description: Patient CRUD and history\n  - name: Clinicians\n    description: Clinician CRUD\n  - name: Assessments\n    description: Assessment CRUD and reports\n\npaths:\n  /patients:\n    get:\n      tags: [Patients]\n      summary: List patients (paginated)\n      parameters:\n        - name: page\n          in: query\n          schema:\n            type: integer\n            default: 1\n        - name: page_size\n          in: query\n          schema:\n            type: integer\n            default: 20\n      responses:\n        '200':\n          description: Paginated list of patients\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/PaginatedPatientsResponse'\n    post:\n      tags: [Patients]\n      summary: Create a patient (calls add_patient)\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/PatientInput'\n      responses:\n        '201':\n          description: Patient created\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/PatientResponse'\n        '400':\n          $ref: '#/components/responses/BadRequest'\n        '500':\n          $ref: '#/components/responses/InternalError'\n\n  /patients/{id}:\n    get:\n      tags: [Patients]\n      summary: Get a patient by id\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      responses:\n        '200':\n          description: Patient record\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/PatientResponse'\n        '404':\n          $ref: '#/components/responses/NotFound'\n    put:\n      tags: [Patients]\n      summary: Update a patient\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/PatientInput'\n      responses:\n        '200':\n          description: Updated patient\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/PatientResponse'\n    delete:\n      tags: [Patients]\n      summary: Delete a patient\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      responses:\n        '204':\n          description: Deleted\n        '404':\n          $ref: '#/components/responses/NotFound'\n\n  /patients/{id}/history:\n    get:\n      tags: [Patients]\n      summary: Get patient wound history (calls get_patient_wound_history)\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      responses:\n        '200':\n          description: Patient wound history\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/PatientHistoryResponse'\n        '404':\n          $ref: '#/components/responses/NotFound'\n\n  /clinicians:\n    get:\n      tags: [Clinicians]\n      summary: List clinicians (paginated)\n      parameters:\n        - name: page\n          in: query\n          schema:\n            type: integer\n            default: 1\n        - name: page_size\n          in: query\n          schema:\n            type: integer\n            default: 20\n      responses:\n        '200':\n          description: Paginated list of clinicians\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/PaginatedCliniciansResponse'\n    post:\n      tags: [Clinicians]\n      summary: Create clinician\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/ClinicianInput'\n      responses:\n        '201':\n          description: Clinician created\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ClinicianResponse'\n\n  /clinicians/{id}:\n    get:\n      tags: [Clinicians]\n      summary: Get clinician by id\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      responses:\n        '200':\n          description: Clinician\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ClinicianResponse'\n    put:\n      tags: [Clinicians]\n      summary: Update clinician\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/ClinicianInput'\n      responses:\n        '200':\n          description: Updated clinician\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/ClinicianResponse'\n    delete:\n      tags: [Clinicians]\n      summary: Delete clinician\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      responses:\n        '204':\n          description: Deleted\n\n  /assessments:\n    get:\n      tags: [Assessments]\n      summary: List assessments (supports filters & pagination)\n      parameters:\n        - name: page\n          in: query\n          schema:\n            type: integer\n            default: 1\n        - name: page_size\n          in: query\n          schema:\n            type: integer\n            default: 20\n        - name: patient_id\n          in: query\n          schema:\n            type: integer\n        - name: clinician_id\n          in: query\n          schema:\n            type: integer\n        - name: start_date\n          in: query\n          schema:\n            type: string\n            format: date\n        - name: end_date\n          in: query\n          schema:\n            type: string\n            format: date\n      responses:\n        '200':\n          description: List of assessment summaries\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/AssessmentSummaryListResponse'\n    post:\n      tags: [Assessments]\n      summary: Create a full assessment (calls add_full_assessment)\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/AssessmentFullInput'\n            examples:\n              example-full:\n                value:\n                  clinician_id: 1\n                  patient_id: 1\n                  location: \"Left Foot\"\n                  etiology: \"Diabetic Ulcer\"\n                  depth_of_injury: \"Partial Thickness\"\n                  stage: \"Stage II\"\n                  chronicity: \"Chronic\"\n                  healing_status: \"Slow Healing\"\n                  return_to_clinic: true\n                  localized_symptoms: \"Redness\"\n                  systemic_symptoms: \"None\"\n                  pain_present: \"Yes\"\n                  pain_score: \"4\"\n                  culture_results: \"Negative\"\n                  antibiotic: \"None\"\n                  granulation_percent: 40\n                  epithelial_percent: 20\n                  slough_percent: 30\n                  eschar_percent: 5\n                  necrotic_percent: 5\n                  debridement: \"Sharp\"\n                  blood_pressure: \"138/88\"\n                  temperature: 37.1\n                  pulse: 78\n                  respiration_rate: 18\n                  oxygen_saturation: 95\n                  w_length: 2.5\n                  w_width: 2.0\n                  w_depth: 0.5\n                  w_tunneling: false\n                  undermining: false\n                  edges: \"Attached\"\n                  skin_condition: \"Dry\"\n                  edema: \"Mild\"\n                  blister: \"No\"\n                  exudate_type: \"Serous\"\n                  exudate_amount: \"Low\"\n                  odor: \"None\"\n                  primary_dressing: \"Foam\"\n                  secondary_dressing: \"Gauze\"\n                  tertiary_dressing: \"Bandage\"\n                  frequency: \"Daily\"\n                  supplies: \"Saline, Dressing pack\"\n                  orders: \"Monitor glucose levels\"\n      responses:\n        '201':\n          description: Created assessment\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/AssessmentResponse'\n        '400':\n          $ref: '#/components/responses/BadRequest'\n        '500':\n          $ref: '#/components/responses/InternalError'\n\n  /assessments/{id}:\n    get:\n      tags: [Assessments]\n      summary: Get assessment (base table fields)\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      responses:\n        '200':\n          description: Assessment\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/AssessmentResponse'\n        '404':\n          $ref: '#/components/responses/NotFound'\n    put:\n      tags: [Assessments]\n      summary: Update base assessment (assessment table only)\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/AssessmentUpdateInput'\n      responses:\n        '200':\n          description: Updated assessment\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/AssessmentResponse'\n    delete:\n      tags: [Assessments]\n      summary: Delete an assessment\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      responses:\n        '204':\n          description: Deleted\n\n  /assessments/{id}/full:\n    get:\n      tags: [Assessments]\n      summary: Get full assessment report (calls get_assessment_full)\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n      responses:\n        '200':\n          description: Full assessment report\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/AssessmentFullReport'\n        '404':\n          $ref: '#/components/responses/NotFound'\n\ncomponents:\n  responses:\n    NotFound:\n      description: Resource not found\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n    BadRequest:\n      description: Validation error\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n    InternalError:\n      description: Internal server error\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n\n  schemas:\n    Error:\n      type: object\n      properties:\n        error:\n          type: string\n      example:\n        error: \"invalid request\"\n\n    PatientInput:\n      type: object\n      required: [full_name, date_of_birth, gender, medical_record_number]\n      properties:\n        full_name:\n          type: string\n        date_of_birth:\n          type: string\n          format: date-time\n        gender:\n          type: string\n        medical_record_number:\n          type: string\n      example:\n        full_name: \"Ravi Kumar\"\n        date_of_birth: \"1985-07-12T00:00:00Z\"\n        gender: \"Male\"\n        medical_record_number: \"MRN001\"\n\n    PatientResponse:\n      type: object\n      properties:\n        data:\n          $ref: '#/components/schemas/Patient'\n    Patient:\n      type: object\n      properties:\n        patient_id:\n          type: integer\n        full_name:\n          type: string\n        date_of_birth:\n          type: string\n          format: date-time\n        gender:\n          type: string\n        medical_record_number:\n          type: string\n      example:\n        patient_id: 1\n        full_name: \"Ravi Kumar\"\n        date_of_birth: \"1985-07-12T00:00:00Z\"\n        gender: \"Male\"\n        medical_record_number: \"MRN001\"\n\n    PaginatedPatientsResponse:\n      type: object\n      properties:\n        data:\n          type: array\n          items:\n            $ref: '#/components/schemas/Patient'\n        page:\n          type: integer\n        page_size:\n          type: integer\n\n    ClinicianInput:\n      type: object\n      required: [full_name, role, department, contact_info, license_number]\n      properties:\n        full_name: { type: string }\n        role: { type: string }\n        department: { type: string }\n        contact_info: { type: string }\n        license_number: { type: string }\n      example:\n        full_name: \"Dr. Rohan Singh\"\n        role: \"Physician\"\n        department: \"Wound Care\"\n        contact_info: \"9876543210\"\n        license_number: \"LIC1001\"\n\n    Clinician:\n      type: object\n      properties:\n        clinician_id: { type: integer }\n        full_name: { type: string }\n        role: { type: string }\n        department: { type: string }\n        contact_info: { type: string }\n        license_number: { type: string }\n      example:\n        clinician_id: 1\n        full_name: \"Dr. Rohan Singh\"\n        role: \"Physician\"\n        department: \"Wound Care\"\n        contact_info: \"9876543210\"\n        license_number: \"LIC1001\"\n\n    ClinicianResponse:\n      type: object\n      properties:\n        data:\n          $ref: '#/components/schemas/Clinician'\n\n    PaginatedCliniciansResponse:\n      type: object\n      properties:\n        data:\n          type: array\n          items:\n            $ref: '#/components/schemas/Clinician'\n        page:\n          type: integer\n        page_size:\n          type: integer\n\n    AssessmentFullInput:\n      type: object\n      required:\n        - clinician_id\n        - patient_id\n        - location\n        - etiology\n        - depth_of_injury\n        - stage\n        - chronicity\n        - healing_status\n      properties:\n        clinician_id: { type: integer }\n        patient_id: { type: integer }\n        location: { type: string }\n        etiology: { type: string }\n        depth_of_injury: { type: string }\n        stage: { type: string }\n        chronicity: { type: string }\n        healing_status: { type: string }\n        return_to_clinic: { type: boolean }\n\n        localized_symptoms: { type: string }\n        systemic_symptoms: { type: string }\n        pain_present: { type: string }\n        pain_score: { type: string }\n        culture_results: { type: string }\n        antibiotic: { type: string }\n\n        granulation_percent: { type: integer }\n        epithelial_percent: { type: integer }\n        slough_percent: { type: integer }\n        eschar_percent: { type: integer }\n        necrotic_percent: { type: integer }\n        debridement: { type: string }\n\n        blood_pressure: { type: string }\n        temperature: { type: number, format: float }\n        pulse: { type: integer }\n        respiration_rate: { type: integer }\n        oxygen_saturation: { type: integer }\n\n        w_length: { type: number, format: float }\n        w_width: { type: number, format: float }\n        w_depth: { type: number, format: float }\n        w_tunneling: { type: boolean }\n        undermining: { type: boolean }\n        edges: { type: string }\n        skin_condition: { type: string }\n        edema: { type: string }\n        blister: { type: string }\n\n        exudate_type: { type: string }\n        exudate_amount: { type: string }\n        odor: { type: string }\n\n        primary_dressing: { type: string }\n        secondary_dressing: { type: string }\n        tertiary_dressing: { type: string }\n        frequency: { type: string }\n        supplies: { type: string }\n        orders: { type: string }\n      example:\n        clinician_id: 1\n        patient_id: 1\n        location: \"Left Foot\"\n        etiology: \"Diabetic Ulcer\"\n        depth_of_injury: \"Partial Thickness\"\n        stage: \"Stage II\"\n        chronicity: \"Chronic\"\n        healing_status: \"Slow Healing\"\n        return_to_clinic: true\n        localized_symptoms: \"Redness\"\n        systemic_symptoms: \"None\"\n        pain_present: \"Yes\"\n        pain_score: \"4\"\n        culture_results: \"Negative\"\n        antibiotic: \"None\"\n        granulation_percent: 40\n        epithelial_percent: 20\n        slough_percent: 30\n        eschar_percent: 5\n        necrotic_percent: 5\n        debridement: \"Sharp\"\n        blood_pressure: \"138/88\"\n        temperature: 37.1\n        pulse: 78\n        respiration_rate: 18\n        oxygen_saturation: 95\n        w_length: 2.5\n        w_width: 2.0\n        w_depth: 0.5\n        w_tunneling: false\n        undermining: false\n        edges: \"Attached\"\n        skin_condition: \"Dry\"\n        edema: \"Mild\"\n        blister: \"No\"\n        exudate_type: \"Serous\"\n        exudate_amount: \"Low\"\n        odor: \"None\"\n        primary_dressing: \"Foam\"\n        secondary_dressing: \"Gauze\"\n        tertiary_dressing: \"Bandage\"\n        frequency: \"Daily\"\n        supplies: \"Saline, Dressing pack\"\n        orders: \"Monitor glucose levels\"\n\n    AssessmentUpdateInput:\n      type: object\n      properties:\n        clinician_id: { type: integer }\n        patient_id: { type: integer }\n        location: { type: string }\n        etiology: { type: string }\n        depth_of_injury: { type: string }\n        stage: { type: string }\n        chronicity: { type: string }\n        healing_status: { type: string }\n        return_to_clinic: { type: boolean }\n\n    Assessment:\n      type: object\n      properties:\n        assessment_id: { type: integer }\n        clinician_id: { type: integer }\n        patient_id: { type: integer }\n        date:\n          type: string\n          format: date-time\n        location: { type: string }\n        etiology: { type: string }\n        depth_of_injury: { type: string }\n        stage: { type: string }\n        chronicity: { type: string }\n        healing_status: { type: string }\n        return_to_clinic: { type: boolean }\n      example:\n        assessment_id: 1\n        clinician_id: 3\n        patient_id: 1\n        date: \"2025-01-01T10:00:00Z\"\n        location: \"Left Foot\"\n        etiology: \"Diabetic Ulcer\"\n        depth_of_injury: \"Partial Thickness\"\n        stage: \"Stage II\"\n        chronicity: \"Chronic\"\n        healing_status: \"Slow Healing\"\n        return_to_clinic: true\n\n    AssessmentResponse:\n      type: object\n      properties:\n        data:\n          $ref: '#/components/schemas/Assessment'\n\n    AssessmentSummaryListResponse:\n      type: object\n      properties:\n        data:\n          type: array\n          items:\n            $ref: '#/components/schemas/AssessmentSummary'\n        page:\n          type: integer\n        page_size:\n          type: integer\n\n    AssessmentSummary:\n      type: object\n      properties:\n        assessment_id: { type: integer }\n        date:\n          type: string\n          format: date-time\n        patient_name: { type: string }\n        clinician_name: { type: string }\n        location: { type: string }\n\n    PatientHistoryResponse:\n      type: object\n      properties:\n        data:\n          type: array\n          items:\n            type: object\n            properties:\n              assessment_id: { type: integer }\n              assessment_date:\n                type: string\n                format: date-time\n              location: { type: string }\n              stage: { type: string }\n              healing_status: { type: string }\n\n    AssessmentFullReport:\n      type: object\n      properties:\n        data:\n          type: object\n          properties:\n            assessment_id: { type: integer }\n            assessment_date:\n              type: string\n              format: date-time\n            patient_name: { type: string }\n            clinician_name: { type: string }\n            location: { type: string }\n            stage: { type: string }\n            healing_status: { type: string }\n            pain_score: { type: string }\n            granulation_percent: { type: integer }\n            w_length:\n              type: number\n              format: float\n            w_width:\n              type: number\n              format: float\n      example:\n        data:\n          assessment_id: 1\n          assessment_date: \"2025-01-01T10:00:00Z\"\n          patient_name: \"Ravi Kumar\"\n          clinician_name: \"Dr. Rohan Singh\"\n          location: \"Left Foot\"\n          stage: \"Stage II\"\n          healing_status: \"Slow Healing\"\n          pain_score: \"4\"\n          granulation_percent: 40\n          w_length: 2.5\n          w_width: 2.0\n\n"
}